# simcut — 설계 문서

> 작성일: 2026-02-19
> 버전: v1.0 (MVP)
> 플랫폼: Mac OS (MVP) → Windows (Phase 3)

---

## 1. 프로젝트 개요

**simcut**은 Python + PyQt6 기반의 간단한 사진 편집 데스크탑 애플리케이션입니다.
사진 불러오기, 도형 추가, 포맷 변환, 내보내기를 핵심 기능으로 하며,
단순한 MVP부터 시작해 점진적으로 기능을 확장합니다.

### 기술 스택

| 라이브러리 | 역할 |
|-----------|------|
| `PyQt6` | GUI 프레임워크 (윈도우, 캔버스, 이벤트) |
| `Pillow` | 이미지 불러오기 / 저장 / 포맷 변환 |
| `PyInstaller` | Mac `.app` / Windows `.exe` 패키징 |
| `pytest` + `pytest-qt` | 단위 테스트 |

---

## 2. 프로젝트 구조

```
/Users/montecarlo/Downloads/2_AREA/apps/simcut/
├── .venv/                    # Python 가상환경 (프로젝트 내 격리)
├── src/
│   ├── main.py               # 앱 진입점
│   ├── ui/
│   │   ├── main_window.py    # 메인 윈도우 & 레이아웃
│   │   ├── canvas.py         # 이미지 편집 캔버스
│   │   ├── toolbar.py        # 도구 모음
│   │   └── properties.py     # 속성 패널 (색상, 굵기 등)
│   ├── core/
│   │   ├── image_handler.py  # 이미지 불러오기 / 저장 / 변환
│   │   └── shape_manager.py  # 도형 렌더링 & 관리
│   └── utils/
│       └── constants.py      # 색상, 기본값 등 상수
├── assets/
│   └── icons/                # 앱 아이콘
├── tests/                    # 단위 테스트
├── docs/
│   └── plans/                # 설계 문서
├── requirements.txt
└── README.md
```

### 아키텍처 패턴

**MVC (Model-View-Controller)** 패턴 적용:

| 레이어 | 위치 | 역할 |
|--------|------|------|
| Model | `core/` | 이미지 데이터, 도형 데이터 관리 |
| View | `ui/` | 화면 렌더링 |
| Controller | `ui/main_window.py` | 이벤트 처리 & 레이어 연결 |

---

## 3. UI 레이아웃

```
┌─────────────────────────────────────────────────────┐
│  메뉴바: File │ Edit │ View                          │
├─────────────────────────────────────────────────────┤
│  [→ 선택] [□ 사각형] [○ 원]  │  선[■] 채움[■] 굵기[_2_] │
├─────────────────────────────────────────────────────┤
│                                                     │
│                                                     │
│               캔버스 (편집 영역)                     │
│                                                     │
│                                                     │
├─────────────────────────────────────────────────────┤
│  상태바: 파일명 | 이미지 크기 | 확대 비율             │
└─────────────────────────────────────────────────────┘
```

### 레이아웃 설명

1. **메뉴바** — File / Edit / View 전체 메뉴
2. **도구바 + 속성 패널** — 같은 행에 수평 배치
   - 왼쪽: 도구 선택 버튼 (선택, 사각형, 원)
   - 오른쪽: 선택한 도구에 따라 동적으로 변경되는 속성값
3. **캔버스** — 이미지 편집 메인 영역 (스크롤 가능)
4. **상태바** — 파일 정보 및 현재 상태 표시

---

## 4. 기능 명세

### 4.1 파일 관리

| 기능 | 단축키 | 지원 포맷 |
|------|--------|----------|
| 이미지 불러오기 | `Cmd+O` | JPG, PNG, WebP, BMP |
| 이미지 내보내기 | `Cmd+Shift+S` | JPG, PNG, WebP, BMP |
| 드래그 & 드롭 열기 | — | JPG, PNG, WebP, BMP |

### 4.2 도형 도구

| 도형 | 속성 |
|------|------|
| 사각형 (Rectangle) | 선 색상, 선 굵기 (1~20px), 배경(채움) 색상, 배경 투명도 |
| 원 / 타원 (Ellipse) | 선 색상, 선 굵기 (1~20px), 배경(채움) 색상, 배경 투명도 |

- 클릭 + 드래그로 도형 생성
- 속성 패널에서 실시간 스타일 적용

### 4.3 편집

| 기능 | 단축키 |
|------|--------|
| 실행 취소 (Undo) | `Cmd+Z` |
| 다시 실행 (Redo) | `Cmd+Shift+Z` |

---

## 5. 개발 환경 세팅

```bash
# 프로젝트 폴더로 이동
cd /Users/montecarlo/Downloads/2_AREA/apps/simcut

# 가상환경 생성 (프로젝트 내 격리)
python3 -m venv .venv

# 가상환경 활성화 (Mac)
source .venv/bin/activate

# 가상환경 활성화 (Windows)
# .venv\Scripts\activate

# 의존성 설치
pip install PyQt6 Pillow PyInstaller pytest pytest-qt

# 의존성 기록
pip freeze > requirements.txt
```

---

## 6. 개발 단계 (Phase)

### Phase 1 — Mac OS MVP *(현재 목표)*

- [ ] 프로젝트 구조 생성 & 가상환경 세팅
- [ ] 메인 윈도우 + 레이아웃 구성 (메뉴바, 도구바, 속성 패널, 캔버스, 상태바)
- [ ] 이미지 불러오기 (Open, 드래그 & 드롭) & 캔버스 표시
- [ ] 사각형 / 원 도형 추가 (선 색상, 굵기, 배경색)
- [ ] 이미지 내보내기 & 포맷 변환 (PNG / JPG / WebP / BMP)
- [ ] Undo / Redo
- [ ] Mac `.app` 패키징 (PyInstaller)

### Phase 2 — 기능 확장

- [ ] 도형 선택 후 이동 / 삭제
- [ ] 텍스트 도구
- [ ] 이미지 크롭 / 리사이즈
- [ ] 화살표 도형

### Phase 3 — Windows 지원

- [ ] Windows 환경 테스트 & 호환성 확인
- [ ] Windows `.exe` 패키징 (PyInstaller)
- [ ] OS별 UI 미세 조정

---

## 7. 테스트 전략

- `pytest` + `pytest-qt` 로 단위 테스트
- 이미지 처리 로직 (`core/`) 우선 테스트
- 80% 이상 커버리지 목표
- TDD 방식 적용: 테스트 작성 → 구현 → 리팩토링
